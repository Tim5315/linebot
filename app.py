# -*- coding: utf-8 -*-

#  Licensed under the Apache License, Version 2.0 (the "License"); you may
#  not use this file except in compliance with the License. You may obtain
#  a copy of the License at
#
#       https://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
#  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
#  License for the specific language governing permissions and limitations
#  under the License.


import os
import sys
import Zhuyin as zh
from argparse import ArgumentParser

from flask import Flask, request, abort
from linebot import (
    LineBotApi, WebhookParser
)
from linebot.exceptions import (
    InvalidSignatureError
)
from linebot.models import (
    MessageEvent, TextMessage, TextSendMessage, ImageSendMessage, 
)

app = Flask(__name__)

# get channel_secret and channel_access_token from your environment variable
channel_secret = os.getenv('LINE_CHANNEL_SECRET', None)
channel_access_token = os.getenv('LINE_CHANNEL_ACCESS_TOKEN', None)
if channel_secret is None:
    print('Specify LINE_CHANNEL_SECRET as environment variable.')
    sys.exit(1)
if channel_access_token is None:
    print('Specify LINE_CHANNEL_ACCESS_TOKEN as environment variable.')
    sys.exit(1)

line_bot_api = LineBotApi(channel_access_token)
parser = WebhookParser(channel_secret)


@app.route("/callback", methods=['POST'])
def callback():
    signature = request.headers['X-Line-Signature']

    # get request body as text
    body = request.get_data(as_text=True)
    app.logger.info("Request body: " + body)

    # parse webhook body
    try:
        events = parser.parse(body, signature)
    except InvalidSignatureError:
        abort(400)

    # if event is MessageEvent and message is TextMessage, then echo text
    for event in events:
        if not isinstance(event, MessageEvent):
            continue
        if not isinstance(event.message, TextMessage):
            continue
        '''
        line_bot_api.reply_message(
            event.reply_token,
            TextSendMessage(text=zh.read(event.message.text))
        )
        '''
        image = 'data:image/jpeg;base64,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'
        line_bot_api.reply_message(
            event.reply_token,
            ImageSendMessage(
                original_content_url = image,
                preview_image_url = image)
        )
    return 'OK'


if __name__ == "__main__":
    arg_parser = ArgumentParser(
        usage='Usage: python ' + __file__ + ' [--port <port>] [--help]'
    )
    arg_parser.add_argument('-p', '--port', type=int, default=8000, help='port')
    arg_parser.add_argument('-d', '--debug', default=False, help='debug')
    options = arg_parser.parse_args()

    app.run(debug=options.debug, port=options.port)
